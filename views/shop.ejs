<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/shop.css">
    <title>PIXEL SHOP - C·ª¨A H√ÄNG TH√ö C∆ØNG</title>
</head>
<body class="shop-body">

    <div class="shop-wrapper">
        <div class="shop-nav">
            <a href="/" class="btn-back">‚¨Ö TR·∫†M CH·ªà HUY</a>
            <div class="shop-info">
                <h1 class="shop-banner">PET MARKET</h1>
                <p class="shop-subtitle">N√¢ng c·∫•p s·ª©c m·∫°nh c√πng ƒë·ªìng ƒë·ªôi m·ªõi</p>
            </div>
            <div class="player-gold">üí∞ MI·ªÑN PH√ç</div>
        </div>

        <div class="pet-showcase">
            
            <div class="pet-item rarity-common">
                <div class="rarity-tag">COMMON</div>
                <div class="pet-preview">
                    <img src="/images/pets/slime.gif" alt="Slime">
                </div>
                <div class="pet-details">
                    <h3>SLIME XANH</h3>
                    <div class="stats-bonus">
                        <span class="bonus-hp">‚ù§Ô∏è +20</span>
                        <span class="bonus-atk">‚öîÔ∏è +2</span>
                    </div>
                    <p class="pet-desc">M·ªôt ch√∫ Slime th√¢n thi·ªán, tƒÉng nh·∫π sinh l·ª±c.</p>
                </div>
                <button class="btn-purchase" onclick="buyPet('slime_xanh')">THU PH·ª§C</button>
            </div>

            <div class="pet-item rarity-epic">
                <div class="rarity-tag">EPIC</div>
                <div class="pet-preview">
                    <img src="/images/pets/dragon.gif" alt="Dragon">
                </div>
                <div class="pet-details">
                    <h3>R·ªíNG L·ª¨A</h3>
                    <div class="stats-bonus">
                        <span class="bonus-atk">‚öîÔ∏è +15</span>
                        <span class="bonus-spd">‚ö° +5</span>
                    </div>
                    <p class="pet-desc">S·ª©c m·∫°nh t·ªëi th∆∞·ª£ng t·ª´ ng·ªçn l·ª≠a vƒ©nh c·ª≠u.</p>
                </div>
                <button class="btn-purchase" onclick="buyPet('rong_lua')">THU PH·ª§C</button>
            </div>

            <div class="pet-item rarity-rare">
                <div class="rarity-tag">RARE</div>
                <div class="pet-preview">
                    <img src="/images/pets/golem.gif" alt="Golem">
                </div>
                <div class="pet-details">
                    <h3>GOLEM ƒê√Å</h3>
                    <div class="stats-bonus">
                        <span class="bonus-hp">‚ù§Ô∏è +100</span>
                        <span class="bonus-spd" style="color: #ff4444;">‚ö° -5</span>
                    </div>
                    <p class="pet-desc">V·ªá binh ƒë√° c·ª©ng c√°p nh∆∞ng h∆°i ch·∫≠m ch·∫°p.</p>
                </div>
                <button class="btn-purchase" onclick="buyPet('golem_da')">THU PH·ª§C</button>
            </div>

        </div>
    </div>

    <script>
        async function buyPet(petId) {
            try {
                const res = await fetch('/shop/buy-pet', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ petId })
                });
                const data = await res.json();
                if(data.success) {
                    alert('Thu ph·ª•c th√†nh c√¥ng!');
                    window.location.href = '/';
                } else {
                    alert('Kh√¥ng th·ªÉ mua Pet: ' + (data.error || 'L·ªói kh√¥ng x√°c ƒë·ªãnh'));
                }
            } catch (err) {
                console.error("L·ªói mua pet:", err);
                alert("L·ªói k·∫øt n·ªëi m√°y ch·ªß!");
            }
        }
    </script>
</body>
</html>